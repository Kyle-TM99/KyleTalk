<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
	<!-- Navigation-->
	<div th:fragment="header" class="header-container">
		<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top">
			<div class="container">
				<!-- 로고 -->
				<a class="navbar-brand" href="/mainPage">
					<span class="fw-bold text-primary">KyleTalk</span>
				</a>

				<!-- 메인 메뉴 -->
				<div class="d-flex align-items-center flex-grow-1 justify-content-between">
					<!-- 왼쪽 메뉴 -->
					<div class="d-flex">
						<a href="/chat" class="nav-link px-3">
							<i class="bi bi-chat-dots me-1"></i>채팅
						</a>
						<a href="/friends" class="nav-link px-3">
							<i class="bi bi-people me-1"></i>친구
						</a>
						<a href="/community" class="nav-link px-3">
							<i class="bi bi-grid me-1"></i>커뮤니티
						</a>
					</div>

					<!-- 오른쪽 메뉴 -->
					<div class="d-flex align-items-center">
						<th:block th:unless="${session.isLogin}">
							<a href="/loginForm" class="btn btn-outline-primary me-2">로그인</a>
							<a href="/joinForm" class="btn btn-primary">회원가입</a>
						</th:block>

						<th:block th:if="${session.isLogin}">
							<!-- 알림 아이콘 -->
							<div class="position-relative me-3">
								<a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#notificationModal">
									<i class="bi bi-bell fs-5"></i>
									<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
										2
									</span>
								</a>
							</div>

							<!-- 프로필 드롭다운 -->
							<div class="dropdown">
								<a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="profileDropdown" data-bs-toggle="dropdown">
									<img th:src="${session.member.memberImage}" class="rounded-circle me-2" width="32" height="32">
									<span class="d-none d-sm-inline" th:text="${session.member.nickname}">사용자</span>
								</a>
								<ul class="dropdown-menu dropdown-menu-end">
									<li><a class="dropdown-item" href="/profile"><i class="bi bi-person me-2"></i>프로필</a></li>
									<li><a class="dropdown-item" href="/settings"><i class="bi bi-gear me-2"></i>설정</a></li>
									<li><hr class="dropdown-divider"></li>
									<li>
										<th:block th:if="${session.member.socialType == 'none'}">
											<a class="dropdown-item text-danger" href="/logout"><i class="bi bi-box-arrow-right me-2"></i>로그아웃</a>
										</th:block>
										<th:block th:if="${session.member.socialType == 'kakao'}">
											<a class="dropdown-item text-danger" href="/oauth/kakao/logout"><i class="bi bi-box-arrow-right me-2"></i>로그아웃</a>
										</th:block>
										<th:block th:if="${session.member.socialType == 'google'}">
											<a class="dropdown-item text-danger" href="/google/logout"><i class="bi bi-box-arrow-right me-2"></i>로그아웃</a>
										</th:block>
									</li>
								</ul>
							</div>
						</th:block>
					</div>
				</div>
			</div>
		</nav>
	</div>
</html>